/* ==========================================================================
   NullTrace UI — calm, minimal, premium dark
   Keeps IDs/classes used by app.js and index.html
   ========================================================================== */

/* 1) Local Inter fonts */
@font-face {
  font-family: 'Inter';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url('../fonts/Inter-Regular.woff2') format('woff2');
}
@font-face {
  font-family: 'Inter';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: url('../fonts/Inter-SemiBold.woff2') format('woff2');
}

/* 2) Theme tokens */
:root {
  /* Dark palette */
  --bg:        #0b0e13;
  --bg-2:      #0e1218;
  --panel:     #0f131a;
  --panel-2:   #111722;
  --surface:   #121924;
  --border:    #1a2230;

  --txt:       #e8f0f6;
  --muted:     #98a3af;

  /* Single accent family (quiet green + soft cyan only when needed) */
  --accent:    #6EE787;    /* calm green (not neon) */
  --accent-2:  #8ab4f8;    /* optional soft cyan for secondary cues */

  --ok:        #23c564;
  --warn:      #f5c84b;
  --danger:    #ff575d;

  /* Elevation + focus */
  --shadow:    0 8px 24px rgba(0,0,0,.35);
  --ring:      0 0 0 2px color-mix(in oklab, var(--accent) 45%, transparent);

  /* Radii / rhythm */
  --radius:    14px;
  --radius-sm: 10px;
  --radius-xs: 8px;

  --gap:       16px;
  --gap-sm:    10px;

  --bottom-bar-height: 3.25rem;

  font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif;
  font-size: 14px;
  color-scheme: dark;
}

/* Light (kept subtle, same structure) */
@media (prefers-color-scheme: light) {
  :root {
    --bg:      #f7f9fc;
    --bg-2:    #eef3f8;
    --panel:   #ffffff;
    --panel-2: #f9fbfe;
    --surface: #ffffff;
    --border:  #e6ebf2;

    --txt:     #0b1220;
    --muted:   #5f6b79;

    --shadow:  0 6px 18px rgba(12,16,22,.08);
  }
}

/* 3) Base reset */
* { box-sizing: border-box; }
html, body { height: 100%; }
html, body {
  margin: 0;
  background: linear-gradient(180deg, var(--bg), var(--bg-2));
  color: var(--txt);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

::selection {
  background: color-mix(in oklab, var(--accent) 30%, transparent);
  color: var(--txt);
}

a { color: var(--accent-2); text-decoration: none; }
a:hover { text-decoration: underline; }

img { display: block; inline-size: auto; max-inline-size: 100%; }

h1,h2,h3,h4 { margin: 0 0 .5rem; line-height: 1.2; }
h1 { font-size: 1.55rem; letter-spacing: .2px; }
h2 { font-size: 1.22rem; color: var(--txt); }
h3 { font-size: 1.05rem; }
h4 { font-size: .96rem; color: var(--txt); font-weight: 600; }

.muted { color: var(--muted); }
.small { font-size: .85rem; }
.mono  { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace; }

code, kbd {
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
  background: color-mix(in oklab, var(--panel-2) 90%, transparent);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 0 .35rem;
  font-size: .92em;
}

.visually-hidden {
  position: absolute !important;
  clip: rect(1px,1px,1px,1px);
  clip-path: inset(50%);
  block-size: 1px; inline-size: 1px;
  overflow: hidden; white-space: nowrap;
  border: 0; padding: 0; margin: -1px;
}

/* 4) Container */
.container {
  max-width: 1080px;
  margin: 0 auto;
  padding: 20px clamp(16px, 4vw, 28px);
}
/* Blur og “freeze” bakgrunn når access-dialogen er åpen */
main.blurred {
  filter: blur(6px) saturate(90%);
  transition: filter .16s ease;
  pointer-events: none;
  user-select: none;
}

/* Sentrer alle åpne <dialog> modal vinduer */
dialog[open] {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  margin: 0; /* overstyr UA-Defaults */
}


/* 5) Topbar */
.topbar {
  display: flex;
  gap: var(--gap);
  align-items: center;
  justify-content: space-between;
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 12px 16px;
  box-shadow: var(--shadow);
}

.brand { display: flex; align-items: center; gap: 12px; }
.logo { width: 38px; height: 38px; border-radius: 10px; }
.brand-copy { display: grid; gap: 2px; }
.app-title { letter-spacing: .2px; font-weight: 600; }
.app-sub { margin: 0; font-size: .85rem; color: var(--muted); }

.status-badges { display: flex; gap: 8px; align-items: center; flex-wrap: wrap; }
.badge {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  height: 26px;
  padding: 0 10px;
  border-radius: 999px;
  background: var(--panel-2);
  border: 1px solid var(--border);
  color: var(--muted);
  font-size: .8rem;
  letter-spacing: .2px;
}
.badge-live::before{
  content: "";
  width: 8px; height: 8px; border-radius: 50%;
  background: var(--ok);
  display: inline-block;
  box-shadow: 0 0 0 0 rgba(35,197,100,.6);
  animation: pulse 2s infinite;
}
@keyframes pulse {
  0%   { box-shadow: 0 0 0 0 rgba(35,197,100,.6); }
  70%  { box-shadow: 0 0 0 10px rgba(35,197,100,0); }
  100% { box-shadow: 0 0 0 0 rgba(35,197,100,0); }
}
@media (prefers-reduced-motion: reduce) {
  .badge-live::before { animation: none; }
}

/* 6) Hero */
.hero { margin: 18px 0; }
.hero-card {
  display: grid;
  gap: 14px;
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: clamp(14px, 4vw, 24px);
  box-shadow: var(--shadow);
}

.quick-actions {
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 10px;
  align-items: center;
}
.actions { display: flex; gap: 8px; }

/* Inputs */
.room-input,
.compose-input,
input[type="text"],
input[type="search"] {
  width: 100%;
  background: var(--panel-2);
  color: var(--txt);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: .6rem .8rem;
  outline: none;
  transition: border-color .15s, box-shadow .15s, background-color .15s;
}
.room-input:focus,
.compose-input:focus,
input:focus {
  border-color: color-mix(in oklab, var(--accent) 55%, var(--border));
  box-shadow: var(--ring);
  background: color-mix(in oklab, var(--panel-2) 85%, transparent);
}
/* Inputs (legg dette sammen med de andre input-reglene) */
input[type="password"] {
  width: 100%;
  background: var(--panel-2);
  color: var(--txt);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: .6rem .8rem;
  outline: none;
  transition: border-color .15s, box-shadow .15s, background-color .15s;
}
input[type="password"]:focus {
  border-color: color-mix(in oklab, var(--accent) 55%, var(--border));
  box-shadow: var(--ring);
  background: color-mix(in oklab, var(--panel-2) 85%, transparent);
}

.hero-points {
  margin: 2px 0 0;
  padding: 0 0 0 18px;
  display: grid;
  gap: 4px;
  color: var(--muted);
  list-style: disc;
}

/* 7) Buttons */
button, .btn {
  --btn-bg: var(--accent);
  --btn-fg: #0b140a;
  --btn-bdr: color-mix(in oklab, var(--accent) 40%, var(--border));
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  height: 38px;
  padding: 0 14px;
  border-radius: 10px;
  border: 1px solid var(--btn-bdr);
  background: var(--btn-bg);
  color: var(--btn-fg);
  font-weight: 600;
  cursor: pointer;
  transition: transform .05s ease, box-shadow .12s ease, filter .12s ease, opacity .2s;
  box-shadow: 0 2px 0 rgba(0,0,0,.12);
}
.btn:hover:not(:disabled) { filter: brightness(1.03); }
.btn:active:not(:disabled) { transform: translateY(1px); box-shadow: 0 1px 0 rgba(0,0,0,.14); }
.btn:disabled,
button:disabled { opacity: .45; cursor: not-allowed; }

.btn.primary { --btn-bg: var(--accent); --btn-fg: #071004; }
.btn.ghost   {
  --btn-bg: var(--panel-2);
  --btn-fg: var(--txt);
  --btn-bdr: var(--border);
  background: var(--btn-bg);
}
.btn.danger  { --btn-bg: var(--danger); --btn-fg: #1a0607; }

/* 8) Pending approvals */
.pending { margin: 6px 0 10px; }
.pending-list {
  list-style: none;
  padding: 0; margin: 0;
  display: grid; gap: 6px;
}
.pending-list li {
  display: flex; justify-content: space-between; align-items: center;
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  padding: 8px 10px;
}
.pending-list button {
  height: 30px; padding: 0 10px;
  border-radius: 8px;
  background: var(--ok);
  border: 1px solid color-mix(in oklab, var(--ok) 45%, var(--border));
  color: #04130d;
  font-weight: 600;
}

/* 9) Main grid (chat + roster) */
.grid {
  display: grid;
  grid-template-columns: minmax(0, 1fr) 280px;
  gap: var(--gap);
  align-items: start;
  margin-bottom: 12px;
}

/* Chat */
.chat-shell {
  background: var(--panel-2);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  min-height: 420px;
  max-height: 62vh;
  overflow: hidden;
  display: grid;
}
.chat {
  list-style: none; margin: 0; padding: 0;
  overflow: auto;
  scrollbar-gutter: stable;
}
.chat li {
  padding: 10px 12px;
  border-bottom: 1px solid rgba(255,255,255,.04);
  border-left: 3px solid transparent;
  word-break: break-word;
}
.chat li.in   { border-left-color: color-mix(in oklab, var(--accent) 60%, transparent); color: var(--txt); }
.chat li.out  { border-left-color: color-mix(in oklab, var(--accent-2) 55%, transparent); color: var(--txt); text-align: right; }
.chat li.error{ color: var(--danger); }
.chat li.sys  { color: var(--muted); font-style: italic; text-align: center; }
.chat li button.burn{
  margin-left: .6rem;
  background: var(--panel);
  color: var(--muted);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 0 8px;
  height: 24px;
  font-size: .8em;
  cursor: pointer;
}
.chat li button.burn:hover { color: var(--txt); border-color: color-mix(in oklab, var(--muted) 40%, var(--border)); }

/* Custom scrollbar (subtle) */
.chat::-webkit-scrollbar,
.user-list::-webkit-scrollbar { width: 10px; height: 10px; }
.chat::-webkit-scrollbar-thumb,
.user-list::-webkit-scrollbar-thumb {
  background: #1b2430; border-radius: 999px; border: 2px solid transparent; background-clip: padding-box;
}
.chat::-webkit-scrollbar-thumb:hover,
.user-list::-webkit-scrollbar-thumb:hover { background: #243140; }

/* Roster */
.roster {
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 10px;
  min-height: 420px;
  max-height: 62vh;
  overflow: hidden;
  display: grid;
  grid-template-rows: auto 1fr;
}
.roster-head { display: grid; gap: 2px; margin-bottom: 8px; }
.user-list { overflow: auto; padding-right: 4px; }
.user-entry {
  display: grid;
  grid-template-columns: 16px auto;
  gap: 8px;
  align-items: center;
  padding: 6px 4px;
  border-radius: 8px;
}
.user-entry:hover { background: rgba(255,255,255,.03); }
.user-entry .user-icon {
  width: 12px; height: 12px; border-radius: 50%; background: currentColor;
}

/* 10) Bottom bar */
.bottom-bar {
  position: sticky;
  bottom: 0;
  display: grid;
  grid-template-columns: 1fr auto;
  gap: var(--gap);
  align-items: center;
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 10px;
  height: var(--bottom-bar-height);
  box-shadow: var(--shadow);
  margin-top: 10px;
}

.compose { display: grid; grid-template-columns: 1fr auto; gap: 8px; }
.compose-input { height: 38px; }
.controls { display: flex; gap: 10px; align-items: center; }
.controls .btn.danger,
.controls #disconnectBtn {
  background: var(--danger);
  border-color: color-mix(in oklab, var(--danger) 45%, var(--border));
  color: #1a0708;
}

/* 11) Feature sections */
.features {
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 14px;
  box-shadow: var(--shadow);
  margin: 18px 0 8px;
}
.feature-grid {
  display: grid;
  grid-template-columns: repeat(3, minmax(0,1fr));
  gap: 12px;
}
.feature {
  background: var(--panel-2);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  padding: 10px 12px;
  transition: border-color .15s ease, transform .06s ease;
}
.feature:hover {
  transform: translateY(-1px);
  border-color: color-mix(in oklab, var(--accent) 30%, var(--border));
}

/* How it works list */
.how-list {
  counter-reset: step;
  list-style: none;
  padding: 0;
  margin: 10px 0 0;
  display: grid;
  gap: 10px;
}
.how-list li {
  position: relative;
  min-height: 28px;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  background: var(--panel-2);
  display: flex;
  align-items: center;
  padding: 8px 12px 8px 40px;
}
.how-list li::before {
  counter-increment: step;
  content: counter(step);
  position: absolute;
  left: 10px; top: 50%;
  transform: translateY(-50%);
  width: 22px; height: 22px;
  border-radius: 6px;
  background: color-mix(in oklab, var(--accent-2) 85%, #0a0f16);
  color: #081018;
  display: grid; place-items: center;
  font-weight: 700; font-size: .85rem;
  border: 1px solid color-mix(in oklab, var(--accent-2) 35%, var(--border));
}

/* 12) Dialogs */
.dlg,
dialog {
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  color: var(--txt);
  padding: 14px;
  box-shadow: 0 30px 80px rgba(0,0,0,.55);
  max-width: 520px;
}
dialog::backdrop {
  background: rgba(4,6,10,.55);
  backdrop-filter: blur(2px);
}
dialog textarea,
.dlg textarea {
  width: 100%; min-height: 92px; resize: vertical;
  background: var(--panel-2);
  color: var(--txt);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: .6rem .7rem;
}
.dlg .dlg-buttons,
dialog .dlg-buttons {
  display: flex; justify-content: flex-end; gap: 8px; margin-top: 10px;
}
.confirm-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px 12px;
}

/* 13) Focus states */
input, textarea, button, .btn { outline: none; }
input:focus-visible,
textarea:focus-visible,
button:focus-visible,
.btn:focus-visible { box-shadow: var(--ring); }

/* 14) Motion */
@media (prefers-reduced-motion: reduce) {
  * { transition: none !important; animation: none !important; }
}

/* 15) Responsive */
@media (max-width: 1024px) {
  .grid { grid-template-columns: 1fr 260px; }
  .feature-grid { grid-template-columns: repeat(2, minmax(0,1fr)); }
}
@media (max-width: 820px) {
  .topbar { flex-wrap: wrap; gap: 10px; }
  .grid { grid-template-columns: 1fr; }
  .roster { order: -1; min-height: auto; max-height: none; }
  .chat-shell { max-height: 55vh; }
  .confirm-grid { grid-template-columns: 1fr; }
}
@media (max-width: 520px) {
  .hero-card { padding: 12px; }
  .quick-actions { grid-template-columns: 1fr; }
  .actions { justify-content: flex-start; }
  .feature-grid { grid-template-columns: 1fr; }
  .bottom-bar { grid-template-columns: 1fr; height: auto; }
  .compose { grid-template-columns: 1fr; }
}

/* 16) Legacy / stability */
.header-center { display: none; }
.welcome, .roadmap { display: none; }

#messages { padding: 6px; }
#userList { padding-right: 4px; }
#status.badge { min-width: 60px; justify-content: center; }
